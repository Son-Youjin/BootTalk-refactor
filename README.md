# BootTalk
ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë¶€íŠ¸ìº í”„ ì •ë³´ë¥¼ ì œê³µí•˜ê³ , ì˜ˆë¹„ êµìœ¡ìƒì´ í˜„ëª…í•œ ì„ íƒì„ ë‚´ë¦´ ìˆ˜ ìˆë„ë¡ ë•ëŠ”Â ë§ì¶¤í˜• í”Œë«í¼ì…ë‹ˆë‹¤.
<br><br>
## ëª©ì°¨
### [1. í”„ë¡œì íŠ¸ ê¸°ê°„](#í”„ë¡œì íŠ¸-ê¸°ê°„)
### [2. ê¸°ìˆ ìŠ¤í…](#ê¸°ìˆ ìŠ¤í…)
### [3. ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
### [4. íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
### [5. í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜](#í”„ë¡œì íŠ¸-ì•„í‚¤í…ì²˜)
<br><br>
## í”„ë¡œì íŠ¸ ê¸°ê°„
ğŸ“ 2025.03.17 ~ 2025.04.23

- 1ì£¼ì°¨: í”„ë¡œì íŠ¸ ê¸°íš, ì™€ì´ì–´í”„ë ˆì„ ì œì‘
- 2ì£¼ì°¨:
  - í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¸íŒ…
  - ì†Œì…œ íšŒì›ê°€ì…/ë¡œê·¸ì¸, ë©”ì¸í˜ì´ì§€, ëŒ€ì‹œë³´ë“œ UI êµ¬í˜„ 
- 3ì£¼ì°¨: MSW ì„¤ì •, Express ì„œë²„ êµ¬ì¶•, êµ¬ì¶•, ë¶€íŠ¸ìº í”„ ë°ì´í„°/ë¦¬ë·° ë°ì´í„°/ì‚¬ìš©ì ë°ì´í„° ë“± ëª¨ì˜ ë°ì´í„° ìƒì„±
- 4ì£¼ì°¨: ë©”ì¸ í˜ì´ì§€ ë° ë¦¬ë·° í˜ì´ì§€ ê¸°ëŠ¥ êµ¬í˜„(í•„í„°ë§, ì‘ì„± í¬í•¨), ë§ˆì´í˜ì´ì§€ ê¸°ëŠ¥ êµ¬í˜„, ì»¤í”¼ì±— í˜ì´ì§€ ê¸°ëŠ¥ êµ¬í˜„
- 5ì£¼ì°¨: 1:1 ì±„íŒ…, ì•Œë¦¼ êµ¬í˜„, ê´€ë¦¬ì í˜ì´ì§€ êµ¬í˜„
- 6ì£¼ì°¨: ë°±&í”„ë¡ íŠ¸ ì—°ë™ ë° ë¦¬íŒ©í† ë§ ì˜¤ë¥˜ ë²„ê·¸ ìˆ˜ì •
<br><br>
<br><br>
## íŒ€ì›
<table>
  <tr>
    <td align="center">
      <img src="https://avatars.githubusercontent.com/u/180407885?v=4" width="100px;" alt=""/><br />
      <b>FE ì†ìœ ì§„</b>
    </td>
    <td align="center">
      <img src="https://avatars.githubusercontent.com/u/154823788?v=4" width="100px;" alt=""/><br />
      <b>FE ë°©ì£¼ì˜</b>
    </td>
  </tr>
</table>
<br><br>

## ê¸°ìˆ ìŠ¤í…
### Front-End
![Next JS](https://img.shields.io/badge/Next-black?style=for-the-badge&logo=next.js&logoColor=white)
![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white)
![TailwindCSS](https://img.shields.io/badge/tailwindcss-%2338B2AC.svg?style=for-the-badge&logo=tailwind-css&logoColor=white)
![Zustand](https://img.shields.io/badge/zustand-%2320232a.svg?style=for-the-badge)
![React Query](https://img.shields.io/badge/-React%20Query-FF4154?style=for-the-badge&logo=react%20query&logoColor=white)
![WebSocket](https://img.shields.io/badge/WebSocket-4353FF?style=for-the-badge&logo=socket.io&logoColor=white)
![STOMP](https://img.shields.io/badge/STOMP-black?style=for-the-badge&logo=apache-activemq&logoColor=white)
![SSE](https://img.shields.io/badge/SSE-008000?style=for-the-badge)
![DaisyUI](https://img.shields.io/badge/daisyui-5A0EF8?style=for-the-badge&logo=daisyui&logoColor=white)
![MSW](https://img.shields.io/badge/MSW-FF6A33?style=for-the-badge)
![Express.js](https://img.shields.io/badge/express.js-%23404d59.svg?style=for-the-badge&logo=express&logoColor=%2361DAFB)

### Collaboration Tool
![GitHub](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white)
![Slack](https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=slack&logoColor=white)
![Notion](https://img.shields.io/badge/Notion-%23000000.svg?style=for-the-badge&logo=notion&logoColor=white)
![Discord](https://img.shields.io/badge/Discord-%235865F2.svg?style=for-the-badge&logo=discord&logoColor=white)

<br><br>
## ì£¼ìš” ê¸°ëŠ¥
<table>
  <tr>
    <th align="center">âœ¨ ë„¤ì´ë²„ íšŒì›ê°€ì…</th>
     <th align="center">âœ¨ ë¬´í•œìŠ¤í¬ë¡¤</th>
  </tr>
  <tr>
    <td align="center">
    <img src="https://github.com/user-attachments/assets/6387dac2-6ba6-4887-b7d1-66af0dbdae00" width="60px;" alt="ë„¤ì´ë²„ íšŒì›ê°€ì…"><br />
    </td>
     <td align="center">
      <img src="https://github.com/user-attachments/assets/6ee50777-2b23-4e0d-804a-300782d02561" width="100px;" alt="ë¬´í•œìŠ¤í¬ë¡¤"><br />
    </td>
  </tr>
</table>

<table>
  <tr>
    <th align="center">âœ¨ í•„í„°ë§</th>
    <th align="center">âœ¨ ê²€ìƒ‰</th>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/640d2cda-3d13-4230-b76e-f010c56cba7a" width="100px;" alt="í•„í„°ë§"><br />
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/302c09d1-be19-4f9d-8a69-2e7bc53077b5" width="100px;" alt="ê²€ìƒ‰"><br />
    </td>
  </tr>
</table>

<table>
  <tr>
    <th align="center">âœ¨ ì´ë¯¸ì§€ ì—…ë¡œë“œ</th>
    <th align="center">âœ¨ ìˆ˜ë£Œì¦ ì—…ë¡œë“œ</th>
    <th align="center">âœ¨ ë¦¬ë·° ì‘ì„±</th>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/872cb032-5d03-4748-a568-e6f9101a4455" width="100px;" alt="ì´ë¯¸ì§€ ì—…ë¡œë“œ"><br />
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/1ef348d6-d7f9-4b23-a20a-9c69a105ee1c" width="100px;" alt="ìˆ˜ë£Œì¦ ì—…ë¡œë“œ"><br />
    </td>
     <td align="center">
      <img src="https://github.com/user-attachments/assets/e00caed7-5d24-44b6-9908-70ac42746850" width="100px;" alt="ë¦¬ë·° ì‘ì„±"><br />
    </td>
  </tr>
</table>

<table>
  <tr>
    <th align="center">âœ¨ ë©˜í†  ì°¾ê¸°</th>
    <th align="center">âœ¨ ë©˜í†  ë“±ë¡</th>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/1fd0d897-9789-4d4c-a378-418b42611647" width="100px;" alt="ë©˜í†  ì°¾ê¸°"><br />
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/3e1a250c-a25b-4902-982b-94d467683a22" width="100px;" alt="ë©˜í†  ë“±ë¡"><br />
    </td>
  </tr>
</table>

<table>
  <tr>
    <th align="center width:50%">âœ¨ ì»¤í”¼ì±— ì‹ ì²­</th>
    <th align="center width:50%">âœ¨ ì‹¤ì‹œê°„ ì•Œë¦¼</th>
    <th align="center width:50%">âœ¨ ì‹¤ì‹œê°„ ì±„íŒ…</th>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/31a13fdf-5dbc-4be7-b0ac-93275b3d1f31" width="100px;"  alt="ì»¤í”¼ì±— ì‹ ì²­"><br />
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/0fa3459e-b607-4371-89e0-c3f583615113" width="100px;" alt="ì‹¤ì‹œê°„ ì•Œë¦¼"><br />
    </td>
     <td align="center">
      <img src="https://github.com/user-attachments/assets/b1c93c7d-7ecb-4ea7-bc67-7b691ee6cb86" width="100px;" alt="ì‹¤ì‹œê°„ ì±„íŒ…"><br />
    </td>

  </tr>
</table>
<table>
  <tr>
    <th align="center width:50%">âœ¨ ì»¤í”¼ì±— ìŠ¹ì¸</th>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/73cf4963-8f77-4d68-b84f-75ee26868695" width="100px;" alt="ì»¤í”¼ì±— ìŠ¹ì¸"><br />
    </td>
  </tr>
</table>
<br><br>

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. í•„í„° ì„ íƒê°’ì´ APIì— ë°˜ì˜ë˜ì§€ ì•Šë˜ ë¬¸ì œ

#### **ë¬¸ì œ ìƒí™©** 
í•„í„° ë²„íŠ¼ í´ë¦­ ì‹œ ë¶€íŠ¸ìº í”„ ë¦¬ìŠ¤íŠ¸ì— ë°˜ì˜ë˜ì§€ ì•Šê³ , API ìš”ì²­ URLì— í•„í„° íŒŒë¼ë¯¸í„°ê°€ ëˆ„ë½ë˜ê±°ë‚˜ ì˜ëª»ëœ ê°’ìœ¼ë¡œ ì „ë‹¬ë¨.


#### **ì›ì¸ ë¶„ì„**
- `queryKey`ì— `filters`ê°€ ì •ìƒì ìœ¼ë¡œ ë°˜ì˜ë˜ì§€ ì•Šê±°ë‚˜,
- `queryFn` ë‚´ë¶€ì—ì„œ í•„í„° ê°’ì„ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ ë°œìƒ.
- íŠ¹íˆ `react-query`ì˜ ìºì‹± ì „ëµê³¼ ì¶©ëŒí•˜ì—¬ ì˜ë„í•œ fetchê°€ ì¼ì–´ë‚˜ì§€ ì•ŠìŒ.


#### **í•´ê²° ë°©ë²•** 
- `filters` ê°ì²´ë¥¼ ìˆœíšŒí•˜ë©° `URLSearchParams`ì— key-value ìŒì„ appendí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •
```tsx
const queryParams = new URLSearchParams({
  page: page.toString(),
  size: PAGE_SIZE.toString(),
});

Object.entries(filters).forEach(([key, value]) => {
  if (key && value) {
    const transformedValue = transformFilterValue(key, value);
    queryParams.append(key, transformedValue);
  }
});
```
- ê° í•„í„° ê°’ì€Â `transformFilterValue`Â í•¨ìˆ˜ë¡œ ë°±ì—”ë“œ ìš”êµ¬ í¬ë§·ì— ë§ê²Œ ë³€í™˜
```tsx
const transformFilterValue = (key: string, value: string): string => {
  if (key === "duration") {
    const valueMap: Record<string, string> = {
      "4ì£¼ ë¯¸ë§Œ": "1",
      "4~12ì£¼": "2",
      "12ì£¼ ì´ìƒ": "3",
    };
    return valueMap[value] || value;
  }

  if (key === "minRating") {
    const valueMap: Record<string, string> = {
      "2ì  ëŒ€": "2",
      "3ì  ëŒ€": "3",
      "4ì  ëŒ€": "4",
    };
    return valueMap[value] || value;
  }

  return value;
};
```
- ìµœì¢…ì ìœ¼ë¡œÂ `?page=0&size=10&region=ì„œìš¸&duration=2&minRating=3`ì²˜ëŸ¼Â ì—¬ëŸ¬ í•„í„°ê°€ ì ìš©ëœ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ì—¬ ì •í™•í•œ API ìš”ì²­ì´ ê°€ëŠ¥í•˜ê²Œ ê°œì„ .
<br><br>

### 2. ë¬´í•œ ìš”ì²­

#### **ë¬¸ì œ ìƒí™©** 
ë¦¬ë·° í˜ì´ì§€ì—ì„œ ë¬´í•œ ìŠ¤í¬ë¡¤ì„ êµ¬í˜„í–ˆì§€ë§Œ, ì‹¤ì œë¡œëŠ” í˜ì´ì§€ ì§„ì… ì§í›„ ìŠ¤í¬ë¡¤ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ì„œë²„ì— ê³„ì† ìš”ì²­ì„ ë³´ë‚´ëŠ” ë¬´í•œ ìš”ì²­ í˜„ìƒì´ ë°œìƒ


#### **ì›ì¸ ë¶„ì„**
- `IntersectionObserver`ê°€ ì˜ëª»ëœ ìœ„ì¹˜ì— ì ìš©ë˜ì–´ ìˆê±°ë‚˜, `observerRef`ê°€ DOMì— ì œëŒ€ë¡œ ì—°ê²°ë˜ì§€ ì•Šì•„ ë Œë”ë§ë˜ìë§ˆì ë°”ë¡œ êµì°¨ ìƒíƒœë¡œ íŒë‹¨ë¨
- ë˜ëŠ” `getNextPageParam` ë¡œì§ì—ì„œ `last` ê°’ ë˜ëŠ” `pageable.pageNumber` ì²˜ë¦¬ ë¯¸í¡ìœ¼ë¡œ ì¸í•´ ë‹¤ìŒ í˜ì´ì§€ ì¡°ê±´ì´ ë¬´ì¡°ê±´ trueê°€ ë¨


#### **í•´ê²° ë°©ë²•** 
```tsx
getNextPageParam: (lastPage) =>
  lastPage.last ? undefined : lastPage.pageable.pageNumber + 1
```
- `IntersectionObserver`ëŠ” `observer.observe(target)` ì‹œì ì„ ë§ˆì§€ë§‰ ìš”ì†Œ ë Œë” ì´í›„ë¡œ ì¡°ì •
- `observerRef`ê°€ í˜ì´ì§€ ë¡œë“œì™€ í•¨ê»˜ ê´€ì°°ì„ ì‹œì‘í•˜ì§€ ì•Šë„ë¡ `useEffect`ì—ì„œ `data?.pages.length`ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì„¤ì •
- ë¦¬ë·° ìš”ì²­ ë‹¨ìœ„ë¥¼ `size=10` â†’ `size=20`ìœ¼ë¡œ ì¡°ì •í•˜ì—¬ ì´ˆê¸° ê³¼ìš”ì²­ ë¬¸ì œ ê°ì†Œ
<br><br>

### 3. ì›¹ì†Œì¼“ ë¬´í•œ ì…ì¥

#### **ë¬¸ì œ ìƒí™©** 
ì›¹ì†Œì¼“ ë¬´í•œ ì…ì¥ í˜„ìƒ ë°œìƒ. `useWebSocket` í›… ë‚´ë¶€ì—ì„œ `client.publish({ destination: '/app/chat/enter' })`ê°€ ë°˜ë³µ ì‹¤í–‰ë˜ë©° ì„œë²„ì— ê³¼ë„í•œ ìš”ì²­ì´ ë°œìƒ.
```tsx
// ChatRoomPage ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€

const { sendMessage, connected } = useWebSocket({
  roomUuid: selectedChat.roomUuid,
  onMessage: (msg) => {
    setMessages((prev) => [...prev, msg]);
  },
  isActive: selectedChat.isActive,
});
```
```tsx
// useWebSocket ë‚´ë¶€ êµ¬ì¡° (ì´ˆê¸° ë¬¸ì œ ë²„ì „)

useEffect(() => {
  // ...
}, [roomUuid, onMessage, socketUrl, isActive])
```


#### **ì›ì¸ ë¶„ì„**
- `useWebSocket` í›… ë‚´ë¶€ì˜ `useEffect` ì˜ì¡´ì„± ë°°ì—´ì— `onMessage`ê°€ í¬í•¨ë˜ì–´ ìˆìŒ
- `onMessage`ëŠ” ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œ ì •ì˜ë˜ë¯€ë¡œ ì°¸ì¡°ê°’ì´ ë°”ë€Œê³ ê·¸ ê²°ê³¼ `useEffect`ê°€ ë°˜ë³µ ì‹¤í–‰ë˜ë©° ì†Œì¼“ ì—°ê²°ì´ ë¬´í•œ ì¬ìƒì„±ë¨ â†’ ë¬´í•œ ì…ì¥


#### **í•´ê²° ë°©ë²•** 
1. onMessageRef ì‚¬ìš©
```tsx
const onMessageRef = useRef(onMessage);

useEffect(() => {
  onMessageRef.current = onMessage;
}, [onMessage]);
```
- ì´í›„ `client.subscribe`ì—ì„œ ì§ì ‘ `onMessageRef.current`ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, `useEffect` ì˜ì¡´ì„± ë°°ì—´ì—ì„œ `onMessage`ë¥¼ ì œê±°í•¨.
- ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ `onMessage` í•¨ìˆ˜ì˜ ì°¸ì¡° ë³€ê²½ì´ `useEffect` ì¬ì‹¤í–‰ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì²˜ë¦¬í•¨.

2. ì˜ì¡´ì„± ë°°ì—´ì—ì„œ onMessage ì œê±°
```tsx
useEffect(() => {
  // websocket init and subscribe
}, [roomUuid, socketUrl, isActive]); // onMessage ì œê±°ë¨
```
- ì´ êµ¬ì¡°ëŠ” ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ê°€ ë™ì ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆìœ¼ë‚˜, useRefë¥¼ í†µí•´ í˜„ì¬ í•¸ë“¤ëŸ¬ë¥¼ í•­ìƒ ìµœì‹  ìƒíƒœë¡œ ìœ ì§€í•˜ë©´ì„œ ì†Œì¼“ ì¬ì—°ê²° ì—†ì´ ì½œë°±ë§Œ ê°±ì‹ í•˜ëŠ” êµ¬ì¡°ë¥¼ ê°–ê²Œ ë¨

<br><br>
## í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜
![image](https://github.com/user-attachments/assets/c83fb717-a8f3-459e-bc82-3167317f2607)
